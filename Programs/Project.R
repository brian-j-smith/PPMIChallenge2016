## NOTE: The R programs in this project require that the working directory be
## NOTE: set to the root directory in which the repository is cloned.  Set the
## NOTE: working directory apart from this file or the other programs prior to
## NOTE: running them.


## Remove all objects from the working environment
remove(list=objects())


## PPMI source datasets
load("Data/Motor.RData")
load("Data/PPMI.RData")
load("Data/Subjects.RData")


## Required analysis libraries
library(plyr)
library(caret)

library(doSNOW)
library(parallel)
registerDoSNOW(makeCluster(detectCores() - 1))


## Project-specific functions

join.ppmi <- function(..., by=NULL, subset, select, na.add=FALSE) {
  X <- join_all(list(...), by=by)
  Xsub <- droplevels(do.call(base::subset, list(X, subset=substitute(subset),
                                                select=substitute(select))))
  f <- colwise(function(x) if(na.add && is.factor(x)) addNA(x, ifany=TRUE) else x)
  f(Xsub)
}


seq.names <- function(x, from, to) {
  vals <- names(x)
  idx <- match(c(from, to), vals)
  vals[seq(idx[1], idx[2])]
}
